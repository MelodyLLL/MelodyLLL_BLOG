import{_ as p,f as o,o as l,c as r,g as n,h as s,i as t,a as e}from"./app-abb8a49b.js";const i={},c=e('<h1 id="自定义eslint插件" tabindex="-1"><a class="header-anchor" href="#自定义eslint插件" aria-hidden="true">#</a> 自定义eslint插件</h1><h2 id="为什么要写这个插件" tabindex="-1"><a class="header-anchor" href="#为什么要写这个插件" aria-hidden="true">#</a> 为什么要写这个插件</h2><ul><li>有助于统一组件、工具类的使用，提升开发效率和提升性能优化</li><li>强制遵守一些开发规范</li><li>自定义我们自己的开发规范</li></ul><h2 id="怎样写这个插件" tabindex="-1"><a class="header-anchor" href="#怎样写这个插件" aria-hidden="true">#</a> 怎样写这个插件</h2><ol><li><p>首先，需要导出一个js文件，需要npm init</p></li><li><p>然后，进入官网</p></li></ol>',5),u={href:"https://eslint.bootcss.com/docs/developer-guide/working-with-plugins",target:"_blank",rel:"noopener noreferrer"},d=n("ol",null,[n("li",null,"一个方法👉 create，返回一个AST语法树的遍历器，以供eslint收集"),n("li",null,"一个参数👉 context，eslint的钩子，类比webpack的、谷歌浏览器的插件开发"),n("li",null,"一个对象👉 meta，重点关注messages，docs")],-1),k=n("strong",null,"关于Yeoman",-1),v={href:"https://yeoman.io/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://plopjs.com/",target:"_blank",rel:"noopener noreferrer"},g=e(`<ol start="3"><li>需要的命令</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>yo eslint<span class="token operator">:</span>plugin
yo eslint<span class="token operator">:</span>rule
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,2),h=n("strong",null,"关于单元测试",-1),b={href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html",target:"_blank",rel:"noopener noreferrer"},_=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// add.test.js</span>
<span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./add.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> expect <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;chai&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;加法函数的测试&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#39;1 加 1 应该等于 2&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>eslint中的不一样，更加偏向于对一个结果的测试，而且被eslint封装了</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&#39;no-console-melody&#39;</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// give me some code that won&#39;t trigger a warning</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;console.warn(foo)&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;avoidConsolelog&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">allow</span><span class="token operator">:</span> <span class="token string">&#39;info&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;console.log(foo)&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">messageId</span><span class="token operator">:</span> <span class="token string">&#39;avoidConsolelog&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;MemberExpression&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>强烈建议使用的AST在线解析</li></ol>`,4),f={href:"https://eslint.org/docs/latest/developer-guide/selectors#what-syntax-can-selectors-have",target:"_blank",rel:"noopener noreferrer"},q={href:"https://astexplorer.net/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/estree/estree",target:"_blank",rel:"noopener noreferrer"},w=n("h2",{id:"问题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#问题","aria-hidden":"true"},"#"),s(" 问题")],-1),j=n("ul",null,[n("li",null,"仅仅只是为了检测jsx?")],-1),P={href:"https://npm.runkit.com/%40wxml%2Fparser",target:"_blank",rel:"noopener noreferrer"},S={href:"https://eslint.bootcss.com/docs/developer-guide/working-with-custom-parsers",target:"_blank",rel:"noopener noreferrer"},T={href:"https://stackoverflow.com/questions/57107800/eslint-disable-extends-in-override",target:"_blank",rel:"noopener noreferrer"},E=n("li",null,[n("p",null,"报错 注意引入自己的eslint插件后，vscode的output有没有报错信息")],-1),C=n("li",null,[n("p",null,"更好的配置方式")],-1),A=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// eslint-plugin-myPlugin</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">configs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">myConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;myPlugin&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;browser&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;myPlugin/my-rule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;eslint-plugin-myPlugin/another-rule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">myOtherConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;myPlugin&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;myPlugin/my-rule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;eslint-plugin-myPlugin/another-rule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
                <span class="token string-property property">&quot;eslint-plugin-myPlugin/yet-another-rule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="还可以做的" tabindex="-1"><a class="header-anchor" href="#还可以做的" aria-hidden="true">#</a> 还可以做的</h2><ul><li>eslint强制校验（husky + lint staged）</li><li>配置更加优化</li><li>我们的文档</li><li>自动fix等功能</li></ul>`,3);function L(M,N){const a=o("ExternalLinkIcon");return l(),r("div",null,[c,n("p",null,[n("a",u,[s("Working with Plugins"),t(a)])]),d,n("p",null,[k,n("a",v,[s("The web’s scaffolding tool for modern webapps | Yeoman"),t(a)])]),n("p",null,[s("类似的还有 "),n("a",m,[s("Plop: Consistency Made Simple"),t(a)])]),g,n("p",null,[h,n("a",b,[s("Mocha - the fun, simple, flexible JavaScript test framework"),t(a)]),n("a",y,[s("测试框架 Mocha 实例教程 - 阮一峰的网络日志"),t(a)])]),_,n("p",null,[s("设置eslint解析以及eslint v8.0 原理，从头到尾、从尾到头深度遍历AST，该过程中规则对匹配的遍历器进行监听，触发对应回调 "),n("a",f,[s("Selectors - ESLint - Pluggable JavaScript Linter"),t(a)]),n("a",q,[s("AST explorer"),t(a)]),n("a",x,[s("GitHub - estree/estree: The ESTree Spec"),t(a)])]),w,j,n("p",null,[n("a",P,[s("RunKit"),t(a)]),n("a",S,[s("Working with Custom Parsers"),t(a)])]),n("ul",null,[n("li",null,[n("p",null,[s("规则冲突？ "),n("a",T,[s("eslint disable extends in override"),t(a)])])]),E,C]),A])}const B=p(i,[["render",L],["__file","Engineering2.html.vue"]]);export{B as default};
